{% extends 'base.html' %}

{% block content %}
<h1>Admin Dashboard</h1>

<h2>Products <a href="{{ url_for('add_product') }}" style="background: #28a745; color: white; padding: 0.5rem 1rem; text-decoration: none; border-radius: 5px;">Add New</a></h2>

<table style="width: 100%; border-collapse: collapse;">
    <tr style="background: #f4f4f4;">
        <th style="padding: 1rem; text-align: left;">Name</th>
        <th>Category</th>
        <th>Price</th>
        <th>Stock</th>
        <th>Actions</th>
    </tr>
    {% for product in products %}
    <tr style="border-bottom: 1px solid #ddd;">
        <td style="padding: 1rem;">{{ product.name }}</td>
        <td>{{ product.category }}</td>
        <td>₦{{ product.price }}</td>
        <td>{{ product.stock }}</td>
        <td>
            <a href="{{ url_for('edit_product', id=product.id) }}">Edit</a> |
            <a href="{{ url_for('delete_product', id=product.id) }}" onclick="return confirm('Are you sure?')">Delete</a>
        </td>
    </tr>
    {% endfor %}
</table>

<h2 style="margin-top: 3rem;">Orders</h2>
<table style="width: 100%; border-collapse: collapse;">
    <tr style="background: #f4f4f4;">
        <th style="padding: 1rem; text-align: left;">Customer</th>
        <th>Product</th>
        <th>Quantity</th>
        <th>Total</th>
        <th>Status</th>
        <th>Actions</th>
    </tr>
    {% for order in orders %}
    <tr style="border-bottom: 1px solid #ddd;">
        <td style="padding: 1rem;">{{ order.customer_name }}<br>{{ order.customer_phone }}</td>
        <td>{{ order.product.name }}</td>
        <td>{{ order.quantity }}</td>
        <td>₦{{ order.total_price }}</td>
        <td>{{ order.status }}</td>
        <td>
            <form method="POST" action="{{ url_for('update_order', id=order.id) }}" style="display: inline;">
                <select name="status">
                    <option value="pending">Pending</option>
                    <option value="confirmed">Confirmed</option>
                    <option value="shipped">Shipped</option>
                    <option value="delivered">Delivered</option>
                </select>
                <button type="submit">Update</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
