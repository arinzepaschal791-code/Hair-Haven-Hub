<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}NoraHairLine - Premium Hair Products{% endblock %}</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Header -->
    <header>
        <nav class="navbar">
            <a href="/" class="logo">Nora<span>HairLine</span></a>
            <ul class="nav-links">
                <li><a href="/" {% if request.path == '/' %}class="active"{% endif %}>Home</a></li>
                <li><a href="/shop" {% if request.path.startswith('/shop') or request.path.startswith('/products') %}class="active"{% endif %}>Shop</a></li>
                <li><a href="/about" {% if request.path == '/about' %}class="active"{% endif %}>About</a></li>
                <li><a href="/contact" {% if request.path == '/contact' %}class="active"{% endif %}>Contact</a></li>
                {% if session.get('admin_logged_in') %}
                <li><a href="/admin/dashboard" {% if request.path.startswith('/admin') %}class="active"{% endif %}>Admin</a></li>
                {% endif %}
            </ul>
            <div class="nav-icons">
                <a href="/account" {% if request.path == '/account' %}class="active"{% endif %}>
                    <i class="fas fa-user"></i>
                </a>
                <a href="/cart" {% if request.path == '/cart' %}class="active"{% endif %}>
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count" id="cart-count">0</span>
                </a>
                {% if session.get('admin_logged_in') %}
                <a href="/logout"><i class="fas fa-sign-out-alt"></i></a>
                {% else %}
                <a href="/login" {% if request.path == '/login' %}class="active"{% endif %}>
                    <i class="fas fa-sign-in-alt"></i>
                </a>
                {% endif %}
            </div>
        </nav>
    </header>

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <div class="flash-messages">
                {% for message in messages %}
                    <div class="flash-message">{{ message }}</div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    <!-- Main Content -->
    <main>
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>NoraHairLine</h3>
                <p>Your destination for premium quality hair products and accessories.</p>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul class="footer-links">
                    <li><a href="/">Home</a></li>
                    <li><a href="/shop">Shop</a></li>
                    <li><a href="/about">About Us</a></li>
                    <li><a href="/contact">Contact</a></li>
                    <li><a href="/admin">Admin Login</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Contact Info</h3>
                <p><i class="fas fa-map-marker-alt"></i> 123 Beauty Street, Hair City</p>
                <p><i class="fas fa-phone"></i> (555) 123-4567</p>
                <p><i class="fas fa-envelope"></i> info@norahairline.com</p>
            </div>
            <div class="footer-section">
                <h3>Newsletter</h3>
                <p>Subscribe for exclusive offers and hair care tips</p>
                <form class="newsletter-form" id="newsletter-form">
                    <input type="email" placeholder="Your email address" required>
                    <button type="submit"><i class="fas fa-paper-plane"></i></button>
                </form>
            </div>
        </div>
        <div class="copyright">
            <p>&copy; 2024 NoraHairLine. All rights reserved.</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Update cart count
        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem('norahair_cart')) || [];
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cart-count').textContent = totalItems;
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateCartCount();
            
            // Newsletter form
            document.getElementById('newsletter-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const email = this.querySelector('input[type="email"]').value;
                if (email) {
                    alert('Thank you for subscribing!');
                    this.reset();
                }
            });
        });
    </script>
    
    {% block extra_js %}{% endblock %}
</body>
</html>
